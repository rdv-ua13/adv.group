{"version":3,"names":[],"mappings":"","sources":["script.js"],"sourcesContent":["$(document).ready(function () {\r\n    var app = new application();\r\n    app.init();\r\n});\r\n\r\n\r\nfunction application() {\r\n    //variable\r\n    //this.myMap;\r\n}\r\napplication.prototype.init = function () {\r\n    this.initTouch();\r\n    this.checkNavBottomDropmenu();\r\n    this.initSliders();\r\n    this.changeImageUser();\r\n    this.toggleClassBurger();\r\n    this.toggleClassDropMenu();\r\n    this.addMaskedInput();\r\n    this.initRegValidation();\r\n    this.toggleClassBusinessMark();\r\n    this.initMap();\r\n    this.setIndentsContactsMap();\r\n    this.toggleClassBusinessDrop();\r\n}\r\n\r\n// Mobile device сheck\r\napplication.prototype.initTouch = function () {\r\n    if ('ontouchstart' in document.documentElement) {\r\n        $('html').addClass('touch');\r\n    }\r\n}\r\n// Checking the contents of the navigation menu\r\napplication.prototype.checkNavBottomDropmenu = function () {\r\n    if($(\".nav-bottom__item\").length) {\r\n        $(\".nav-bottom__item\").each(function () {\r\n           $(\".nav-bottom__item\").has(\".nav-bottom__drop\").addClass(\"nav-bottom__item--contains\");\r\n        });\r\n    }\r\n}\r\n// Slider initialization\r\napplication.prototype.initSliders = function () {\r\n    // Partners\r\n    if ($('.js-partners').length) {\r\n        new Swiper(\".js-partners\", {\r\n            slidesPerView: 1,\r\n            slidesPerColumn: 3,\r\n            spaceBetween: 16,\r\n            grabCursor: true,\r\n            mousewheel: true,\r\n            scrollbar: {\r\n                el: \".js-partners .swiper-scrollbar\",\r\n            },\r\n            breakpoints: {\r\n                // when window width is >= {value}px\r\n                768: {\r\n                    slidesPerView: 3,\r\n                    slidesPerColumn: 2,\r\n                    spaceBetween: 24,\r\n                },\r\n            },\r\n        });\r\n    }\r\n\r\n    // Awards\r\n    if ($('.js-awards').length) {\r\n        var swiperAwards = null;\r\n\r\n        function initSwiperAwards () {\r\n            swiperAwards = new Swiper('.js-awards', {\r\n                slidesPerView: 1,\r\n                slidesPerColumn: 3,\r\n                spaceBetween: 16,\r\n                grabCursor: true,\r\n                mousewheel: true,\r\n                scrollbar: {\r\n                    el: \".js-awards .swiper-scrollbar\",\r\n                },\r\n            });\r\n        }\r\n        initSwiperAwards();\r\n\r\n        function reinitSwiperAwards() {\r\n            if (window.matchMedia(\"(min-width:768px)\").matches) {\r\n                swiperAwards.disable();\r\n                swiperAwards.update();\r\n                $(\".js-awards\").addClass(\"disabled\");\r\n\r\n            } else if (window.matchMedia(\"(max-width:767.98px)\").matches) {\r\n                swiperAwards.enable();\r\n                swiperAwards.update();\r\n                $(\".js-awards\").removeClass(\"disabled\");\r\n            }\r\n        }\r\n\r\n        $(window).on('resize', reinitSwiperAwards).trigger('resize');\r\n    }\r\n\r\n    // Vendors\r\n    if ($('.js-vendors').length) {\r\n        new Swiper(\".js-vendors\", {\r\n            slidesPerView: 2,\r\n            grabCursor: true,\r\n            mousewheel: true,\r\n            scrollbar: {\r\n                el: \".js-vendors .swiper-scrollbar\",\r\n            },\r\n            breakpoints: {\r\n                // when window width is >= {value}px\r\n                768: {\r\n                    slidesPerView: 3,\r\n                },\r\n                992: {\r\n                    slidesPerView: 4,\r\n                },\r\n                1440: {\r\n                    slidesPerView: 5,\r\n                },\r\n            },\r\n        });\r\n    }\r\n}\r\n// Сhange the image of the entrance to personal account\r\napplication.prototype.changeImageUser = function () {\r\n    var srcImgKey = \"/build/img/key.png\",\r\n        srcImgUser = \"/build/img/user.png\",\r\n        srcImgCallBlack = \"/build/img/call-black.png\",\r\n        srcImgCallRed = \"/build/img/call.png\";\r\n\r\n    $(window).on(\"resize\", function () {\r\n        if (window.matchMedia(\"(min-width:768px)\").matches) {\r\n            $('.js-user img').attr(\"src\", srcImgKey);\r\n            $('.js-call img').attr(\"src\", srcImgCallRed);\r\n        }\r\n        else if (window.matchMedia(\"(max-width:767.98px)\").matches) {\r\n            $('.js-user img').attr(\"src\", srcImgUser);\r\n            $('.js-call img').attr(\"src\", srcImgCallBlack);\r\n        }\r\n    }).trigger('resize');\r\n}\r\n// Menu-burger button\r\napplication.prototype.toggleClassBurger = function () {\r\n    $(\".menu-btn\").on(\"click\", function () {\r\n        $(this).toggleClass(\"active\");\r\n    });\r\n}\r\n// Menu top \"nav-bottom__drop\"\r\napplication.prototype.toggleClassDropMenu = function () {\r\n    responsiveDropMenu();\r\n    $(window).on(\"resize\", responsiveDropMenu);\r\n\r\n    function responsiveDropMenu() {\r\n        if (window.matchMedia(\"(max-width:767.98px)\").matches) {\r\n            /*$('.nav-bottom__item--contains .nav-bottom__drop').hide();*/\r\n\r\n            $('.js-nav-bottom-link').on('click', function () {\r\n                if (!$(this).closest('.nav-bottom__item--contains').hasClass('active')) {\r\n                    $(\".nav-bottom__item--contains\").removeClass(\"active\");\r\n                    $(this).closest(\".nav-bottom__item--contains\").addClass(\"active\");\r\n                }\r\n                else if ($(this).closest('.nav-bottom__item--contains').hasClass('active')) {\r\n                    $(this).closest('.nav-bottom__item--contains').removeClass('active');\r\n                }\r\n            });\r\n        } else { return }\r\n    }\r\n}\r\n// Mobile number mask\r\napplication.prototype.addMaskedInput = function () {\r\n    $(\".isPhone\").mask(\"+7 (999) 999-99-99\", { autoclear: false });\r\n}\r\n// Validation of registration form\r\napplication.prototype.initRegValidation = function () {\r\n    $(function() {\r\n        $(\"form.registration\").validate({\r\n            // Specify validation rules\r\n            rules: {\r\n                SURNAME: \"required\",\r\n                NAME: \"required\",\r\n                MIDDLENAME: \"required\",\r\n                PHONE: \"required\",\r\n                EMAIL: {\r\n                    required: true,\r\n                    email: true\r\n                },\r\n                TAXPAYERID: \"required\",\r\n                LEGALNAME: \"required\",\r\n                BRANDNAME: \"required\",\r\n                SITE: \"required\",\r\n            },\r\n            // Specify validation error messages\r\n            messages: {\r\n                SURNAME: \"Поле не заполнено\",\r\n                NAME: \"Поле не заполнено\",\r\n                MIDDLENAME: \"Поле не заполнено\",\r\n                PHONE: \"Поле не заполнено\",\r\n                EMAIL: \"Поле не заполнено\",\r\n                TAXPAYERID: \"Поле не заполнено\",\r\n                LEGALNAME: \"Поле не заполнено\",\r\n                BRANDNAME: \"Поле не заполнено\",\r\n                SITE: \"Поле не заполнено\",\r\n            },\r\n            // Make sure the form is submitted to the destination defined\r\n            // in the \"action\" attribute of the form when valid\r\n            submitHandler: function(form) {\r\n                form.submit();\r\n            }\r\n        });\r\n    });\r\n}\r\n// Business-solutions marks behaviour\r\napplication.prototype.toggleClassBusinessMark = function () {\r\n    if($(\".business-solution .js-item-mark\").length) {\r\n        $(document).on(\"click\", function (e) {\r\n            if(!$(\".business-solution .js-item-mark\").is(e.target)) {\r\n                $(\".business-solution .js-item-mark\").removeClass(\"active\");\r\n                $(\".business-solution__item\").removeClass(\"active\");\r\n                $(\".business-solution__item-box\").removeClass(\"has-active\");\r\n            }\r\n        });\r\n\r\n        $(\".business-solution .js-item-mark\").on(\"click\", function () {\r\n            if (!$(this).hasClass(\"active\")) {\r\n                $(\".business-solution .js-item-mark\").removeClass(\"active\");\r\n                $(\".business-solution__item\").removeClass(\"active\");\r\n                $(this).addClass(\"active\");\r\n                $(this).next(\".business-solution__item\").addClass(\"active\");\r\n                $(\".business-solution__item-box\").addClass(\"has-active\");\r\n\r\n                $(\"html, body\").animate({\r\n                    scrollTop: $(\".business-solution\").offset().top\r\n                }, 300);\r\n\r\n                $(\".js-item-mark\").removeClass(\"animated animation-delay-2 animation-delay-3 animation-delay-4 animation-delay-5 animation-delay-6 animation-delay-7 animation-delay-8\");\r\n            } else {\r\n                $(this).removeClass(\"active\");\r\n                $(this).next(\".business-solution__item\").removeClass(\"active\");\r\n                $(\".business-solution__item-box\").removeClass(\"has-active\");\r\n            }\r\n        });\r\n    }\r\n}\r\n// Map initialization\r\napplication.prototype.initMap = function () {\r\n    if($(\"#map\").length) {\r\n        var coords = null;\r\n        var ratio = null;\r\n\r\n        if (window.matchMedia(\"(max-width:767.98px)\").matches) {\r\n            zoomval = 12;\r\n            coords = [55.79, 37.76];\r\n            ratio = 1;\r\n        }\r\n        else if (window.matchMedia(\"(min-width:768px)\").matches) {\r\n            zoomval = 11;\r\n            coords = [55.76, 37.63];\r\n            ratio = 2;\r\n        }\r\n\r\n        ymaps.ready(init);\r\n        $(window).on(\"resize\", init);\r\n        function init(){\r\n            // Создание карты.\r\n            var myMap = new ymaps.Map(\"map\", {\r\n                // Координаты центра карты.\r\n                // Порядок по умолчанию: «широта, долгота».\r\n                center: coords,\r\n                controls: [],\r\n                zoom: zoomval,\r\n            }, {\r\n                searchControlProvider: 'yandex#search'\r\n            }),\r\n\r\n            myPlacemark = new ymaps.Placemark([55.752019,37.759488]);\r\n            myMap.geoObjects.add(myPlacemark);\r\n            myMap.controls.add('zoomControl', {position: {right: '10px', bottom: 80 * ratio + 'px'}});\r\n            myMap.behaviors.disable('scrollZoom');\r\n            //на мобильных устройствах... (проверяем по userAgent браузера)\r\n            if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)){\r\n                //... отключаем перетаскивание карты\r\n                myMap.behaviors.disable('drag');\r\n            }\r\n        }\r\n\r\n    }\r\n}\r\n// Contacts map indents for mobile\r\napplication.prototype.setIndentsContactsMap = function () {\r\n    if($(\"#map\").length) {\r\n        setHeight();\r\n        $(window).on(\"resize\", setHeight);\r\n\r\n        function setHeight() {\r\n            if (window.matchMedia(\"(max-width:767.98px)\").matches) {\r\n                var height = $(\".js-contacts-map-board\").outerHeight();\r\n\r\n                $(\".js-contacts-map-board\").css({\"margin-bottom\" : -height});\r\n            } else { return }\r\n        }\r\n    }\r\n}\r\n// Business solutions mobile dropdown menu\r\napplication.prototype.toggleClassBusinessDrop = function () {\r\n    if (window.matchMedia(\"(max-width:767.98px)\").matches) {\r\n        $('.js-bs-drop').hide();\r\n\r\n        $('.js-bs-btn').on('click', function () {\r\n            if (!$(this).hasClass('active')) {\r\n                $(\".js-bs-btn\").removeClass(\"active\");\r\n                $(\".js-bs-drop\").slideUp(300);\r\n                $(this).addClass(\"active\");\r\n                $(this).next('.js-bs-drop').addClass(\"active\").slideDown(300);\r\n            }\r\n            else if ($(this).hasClass('active')) {\r\n                $(this).removeClass('active');\r\n                $(this).next('.js-bs-drop').removeClass('active').slideUp(300);\r\n            }\r\n        });\r\n    } else { return }\r\n}\r\n"],"file":"script.js"}